# Хранение данных в PostgreSQL (Render)

Чтобы расписание, статистика и комментарии **не сбрасывались** при перезапуске или редеплое на Render, подключите бесплатный инстанс PostgreSQL.

## Шаги на Render

1. В дашборде Render создайте **PostgreSQL** (New → PostgreSQL).
2. После создания откройте инстанс и скопируйте **Internal Database URL** (или External, если приложение вне Render).
3. В настройках вашего **Web Service** (приложения) добавьте переменную окружения:
   - **Key**: `DATABASE_URL`
   - **Value**: вставьте скопированный URL (Render подставит его автоматически, если БД и сервис в одном аккаунте).

После следующего деплоя приложение само создаст таблицы при старте и будет сохранять в БД:

- **schedule** — расписание (время, частота, включено/выключено, следующий запуск);
- **stats_posts** — посты и статистика (просмотры, комментарии);
- **comments** — комментарии из группы (через Zapier);
- **groups** — список групп и активная группа.

Если `DATABASE_URL` не задан, по-прежнему используются файлы `schedule.json`, `stats.json`, `comments.json`, `groups.json` (на Render они пропадают при рестарте).

## Переменная в .env

Для локальной разработки с БД добавьте в `.env`:

```
DATABASE_URL=postgresql://user:password@host:5432/dbname
```

Используйте значение из Render (External Database URL) или локальный PostgreSQL.
